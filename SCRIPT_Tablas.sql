CREATE TABLE USUARIO (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    USERNAME VARCHAR2(50) UNIQUE NOT NULL,
    PASSWORD_HASH VARCHAR2(255) NOT NULL,
    CREATED_AT DATE DEFAULT SYSDATE,
    UPDATED_AT DATE
);

CREATE TABLE CATEGORIA (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE VARCHAR2(100) NOT NULL,
    CREATED_AT DATE DEFAULT SYSDATE,
    UPDATED_AT DATE
);

CREATE TABLE PRODUCTO (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE VARCHAR2(100) NOT NULL,
    STOCK NUMBER DEFAULT 0,
    STOCK_MINIMO NUMBER DEFAULT 0,
    ID_CATEGORIA NUMBER NOT NULL,
    CREATED_AT DATE DEFAULT SYSDATE,
    UPDATED_AT DATE,
    CONSTRAINT FK_PRODUCTO_CATEGORIA FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIA(ID)
);

CREATE TABLE MOVIMIENTO (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TIPO VARCHAR2(10) CHECK (TIPO IN ('ENTRADA', 'SALIDA')),
    CANTIDAD NUMBER NOT NULL,
    FECHA DATE DEFAULT SYSDATE,
    ID_PRODUCTO NUMBER NOT NULL,
    ID_USUARIO NUMBER,
    CONSTRAINT FK_MOVIMIENTO_PRODUCTO FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO(ID),
    CONSTRAINT FK_MOVIMIENTO_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID)
);